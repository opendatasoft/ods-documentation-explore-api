sudo: false
language: ruby
rvm:
- 2.4.0
cache: bundler
env:
  global:
  - DEPLOY_PATH=/var/www/apidoc/explore
  - DEPLOY_BETA_PATH=/var/www/betaapidoc/explore
  - secure: PgCo9Uuz+Xj1RyHMnPZ5vurHKuewnI5bi9itB01u0gOkda1c7i3tCnaTE2Pu1FDuM33X8An9LVmS1cV6AiNHhVnfpCOkerSCfgLkWWq9eB4XYa3asNRCmdZbm4p6B2wU8IX0NqrBqecE3iUX4Rd620CHejZvaKLMTSHRgK+h/rr/ge/oHLPdwJULTSb2m5IYu6pilX1u6Hpd84bvWdtaNTx9muaT4cDtV8BSPcDmLmUAcatPgPk3aSI2MY+ZUPGQpCaDd55kF0R30rGidRBvqB7rHgyNKgZ2FjtZDYS36KoKfmGHbE/HCU52rGwW0/eAZn+VAzP9yWaihMC1y4IKNCxV1hGUU/20BUhh3r4JxMzKaMObknfQGSo4sQ9Gi4AtZL5i/IQw8H3XvI2n6DtVGAwbJpl4K1JJQIGLNxazzoxBGX+9KUtf0DLptzyknivqu8lt23gnC5db51z5YoY1MTZp4CeOoKuYkarp59/YfGPmHmwWiKJBxaYc0GCKqFzMJS6HZpBL0Ev9bELpbzEKKKBasuXXi1fyi86cUFcOJFBxpw1C8vt7bRnzM11oRh8b5gWUm3bbOsXmOX6/T530/JUpftNDP6AugH88Nti5pUbdPchpOLck9QUFV2AgsUMCzFS4lpdKEMzaApH4IbOCYw7Xm07jpOkPcJch3P1N164=
  - secure: YoLS7+aFo+YeWM51j6JJCOGM/TErpwHm7NS2GJQKW/H5hngesokFNeF3MIAKV6WQkaCzPJ75MuIHZipVF3lOSWVW/yPupsMiG1LG/RBA/01GXM2m2vkEF8hvwZ2VBq7wEHzXDR72grtaBFfA32u9I9dNXOr+b8TnHx768PMHcMTxMcJFLFykD1waISWfxBjBTKNZLessxG1uVSXJtzOBmkcM5Tinj+mWAuAwkHuwBviA21XxynZpNXMLtuC6U6GgNxibB2ZWJOzp6gVs4VHKB+zHrlxLUOYn41Tyxxh+iSPRqF77iLgMWRdvO/+XWaz6v18AASxZOqJvhmdB3fZFHhPQdxHAk6aioKnGMqnIWUcfhhD1+cVLJySmIuOF8Zf7FsFNAj7SQPLuwqhQFx//f8Fr4cZ678fhwOnElw7BTc3iCeS+2uCUoAPowYHWPcVWLBWZUEWnMlYaFTwuatDtCSXp0VaFhFNU/ZvL4TCrYNzoP9ZF3Gh82mpPdeUmIpEql0AgcRoQp/auw2BQYihfsfj9JeB5dM2CjNTGgKt9yU8aMYKIBs29Gp/n2IK2z4R2Iqis0Szsqz5yRcAGwIKhnsblBIqFYfaSCJ3isrnMTN0v2pA6w3T6KIdYJxysDmoXqobgdS5R1d2BSeE42rN2sR8Z9cV0lHZOBclEz5xAs40=
install: bundle install
script: bundle exec middleman build
after_success:
- openssl aes-256-cbc -K $encrypted_57e888a64d54_key -iv $encrypted_57e888a64d54_iv
  -in .travis.deploy.enc -out .travis.deploy -d
- chmod 600 .travis.deploy
- eval "$(ssh-agent -s)"
- ssh-add .travis.deploy
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "master" && rsync
  -e "ssh -o StrictHostKeyChecking=no" -az --force --delete build/ "$DEPLOY_USER"@"$DEPLOY_IP":"$DEPLOY_PATH"
  2>/dev/null
- test $TRAVIS_PULL_REQUEST == "false" && test $TRAVIS_BRANCH == "develop" && rsync
  -e "ssh -o StrictHostKeyChecking=no" -az --force --delete build/ "$DEPLOY_USER"@"$DEPLOY_IP":"$DEPLOY_BETA_PATH"
  2>/dev/null
notifications:
  slack:
    secure: pPbIMu31IDO5Poa/pKGF2gL1ED5sHGbpRlOvxbVHDqwN1yb/VGDaiOb78Hen4o8MClTzoJzACEJI2wa9GhD+hBMHQYFYSkg/G3rktKtKALCKIrnq8+633zwCFrBBlfzx3zqAtFZ374ozj4QE7XYwT8sOrywLDemz5Xyz9pXWklV3SEzBmEtgqc39cb5BnXMg+dEx72Wu4XQWMX13MF73/CbcgaL+VXywCky0sz0vEUeVAWkvYnsVFnQVjg4PXWKWqBPjL4ruPFTmSR+P7/NHdRwscObbT3SUrVhT0o0KQqBi6cmWnMYJFnVjDwqno937oerCgykqPbDTuNkIKpZjJ3cKdtSjK/rLj6jjym5nSgctTstM2CnilrgxnE/H9ScS5cG/3FypXs8+3HG6pZmbEfZGGlZ47zpPBwh1JCLWhfYyr1a8l+736OCWuQuZ9B3KAPg3+RGmA0Ccp9CMDOLiBukxyMlJgvs3XOijsKEhYELy9hKwpFwvl/3e7Lx12pe5ixXNAgcJTts3A/OF/HHd1Unj3Zt/lrNIXl1LTFC+8KCvBVTKC15huIf9+x713ypuHxNT319snEBzIkgghbAEDM39IsPlSIGgKIiZQ8EwfFOeegmvccB3ZIJatVhRJMui2XZE1GMki9ZR5moKjvCF81APmc0VUd8A3iAFDK/lo2s=
